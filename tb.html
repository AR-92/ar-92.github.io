<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tailBlast</title>
    <script src="./alpine.js" defer></script>
    <script src="./tw.js"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
      };
    </script>
    <link rel="stylesheet" href="./animate.css" />
    <style>
      :root {
        --animate-duration: 500ms;
        --animate-delay: 0.9s;
      }
      [x-cloak] {
        display: none !important;
      }
    </style>
  </head>
  <body x-cloak x-data="tailBlast" :class="settings.bgColor">
    <div x-html="template" id="main"></div>

    <div
      x-effect="change()"
      :class="{'dark': settings.darkMode,[settings.bgColor]: true}"
    >
      <!-- model div  inset-0 -->
      <div class="fixed flex items-center justify-center">
        <!-- about page start -->
        <div
          x-show="settings.openAbout"
          class="animate__animated animate__slideInRight bg-white dark:bg-slate-800 h-[calc(100vh-50px)] w-[calc(100%-50px)] rounded-lg relative z-10 border dark:border-slate-700"
        >
          <div class="flex absolute left-0 m-2">
            <svg
              @click="settings.openAbout=false;settings.openMainMenu=true"
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5 m-auto dark:text-slate-100"
              viewBox="0 0 512 512"
            >
              <path
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="32"
                d="M368 368L144 144M368 144L144 368"
              />
            </svg>
          </div>
        </div>
        <!-- about page end -->
        <!-- help page start -->
        <div
          x-show="settings.openHelp"
          class="animate__animated animate__zoomIn bg-white dark:bg-slate-800 h-[500px] w-1/2 rounded-lg relative z-10 border dark:border-slate-700"
        >
          <div class="flex absolute left-0 m-2">
            <svg
              @click="settings.openHelp=false;settings.openMainMenu=true"
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5 m-auto dark:text-slate-100"
              viewBox="0 0 512 512"
            >
              <path
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="32"
                d="M368 368L144 144M368 144L144 368"
              />
            </svg>
          </div>
        </div>
        <!-- help page end -->
      </div>
      <!-- model div -->
      <!-- flowting div start -->
      <div
        :style="`top: ${settings.top}px; left: ${settings.left}px; position: absolute; user-select: none;`"
      >
        <!-- Start page -->
        <div
          x-data="{isAnimating : false}"
          @mousedown="startDragging"
          @mousemove="dragging"
          @mouseup="openMainMenu"
          @mouseleave="stopDragging"
          x-show="settings.MainMenu"
          @mouseenter="isAnimating = true"
          @animationend="isAnimating = false"
          class="h-fit w-[270px] bg-white dark:bg-slate-800 rounded-lg flex flex-col gap-1 text-xs border dark:border-slate-800"
        >
          <div
            class="flex justify-between items-center group hover:text-orange-500 dark:hover:text-orange-500 dark:text-slate-100 p-3 cursor-pointer rounded-lg"
          >
            <div class="flex gap-3">
              <svg
                :class="{'animate__rollIn': isAnimating}"
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 animate__animated"
                viewBox="0 0 512 512"
              >
                <rect
                  x="32"
                  y="48"
                  width="448"
                  height="416"
                  rx="48"
                  ry="48"
                  fill="none"
                  stroke="currentColor"
                  stroke-linejoin="round"
                  stroke-width="32"
                />
                <path
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="32"
                  d="M96 112l80 64-80 64M192 240h64"
                />
              </svg>
              <div class="m-auto">tailBlast Menu</div>
            </div>
            <div
              class="text-blue-500 group-hover:text-orange-500 dark:text-blue-100"
            >
              Ctrl+O
            </div>
          </div>
        </div>
        <!-- Start page end -->
        <!-- main page start -->
        <div
          x-show="settings.openMainMenu"
          class="animate__animated animate__fadeInDownBig h-fit w-[270px] bg-white dark:bg-slate-800 dark:text-slate-100 rounded-lg flex flex-col gap-1 p-2 text-xs border dark:border-slate-700"
        >
          <div
            @click="settings.openMainMenu = false;settings.openProjectMenu=true;"
            x-data="{ isAnimating: false }"
            @mouseenter="isAnimating = true"
            @animationend="isAnimating = false"
            class="flex group justify-between items-center hover:text-green-500 cursor-pointer p-2 rounded-lg"
          >
            <div class="flex gap-3">
              <svg
                :class="{'animate__rollIn': isAnimating}"
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 m-auto animate__animated"
                viewBox="0 0 512 512"
              >
                <path
                  d="M440 432H72a40 40 0 01-40-40V120a40 40 0 0140-40h75.89a40 40 0 0122.19 6.72l27.84 18.56a40 40 0 0022.19 6.72H440a40 40 0 0140 40v240a40 40 0 01-40 40zM32 192h448"
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="32"
                />
              </svg>
              <div class="m-auto">Open Projects</div>
            </div>
            <div class="text-gray-500 group-hover:text-green-500">Ctrl+O</div>
          </div>
          <!-- <div
            @click="settings.openAbout=true;settings.openMainMenu=false"
            x-data="{ isAnimating: false }"
            @mouseenter="isAnimating = true"
            @animationend="isAnimating = false"
            class="flex justify-between items-center hover:text-purple-500 cursor-pointer p-2 rounded-lg"
          >
            <div class="flex gap-3">
              <svg
                :class="{'animate__slideInLeft': isAnimating}"
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 m-auto animate__animated"
                viewBox="0 0 512 512"
              >
                <path
                  d="M229.73 45.88L37.53 327.79a31.79 31.79 0 0011.31 46L241 476.26a31.77 31.77 0 0029.92 0l192.2-102.51a31.79 31.79 0 0011.31-46L282.27 45.88a31.8 31.8 0 00-52.54 0zM256 32v448"
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="32"
                />
              </svg>
              <div class="m-auto">About</div>
            </div>
            <div class="text-gray-500 dark:group-hover:text-slate-100"></div>
          </div> -->
          <div
            @click="fullscreen"
            x-data="{ isAnimating: false }"
            @mouseenter="isAnimating = true"
            @animationend="isAnimating = false"
            class="flex group justify-between items-center cursor-pointer p-2 rounded-lg"
          >
            <div
              class="flex gap-3"
              :class="!settings.fullScreenCon ? 'group-hover:text-blue-500' : 'group-hover:text-red-500'"
            >
              <svg
                :class="{'animate__rotateIn': isAnimating}"
                x-show="!settings.fullScreenCon"
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 m-auto animate__animated"
                viewBox="0 0 512 512"
              >
                <path
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="32"
                  d="M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"
                />
              </svg>
              <svg
                :class="{'animate__rotateIn': isAnimating}"
                x-show="settings.fullScreenCon"
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 m-auto animate__animated"
                viewBox="0 0 512 512"
              >
                <path
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="32"
                  d="M304 416V304h112M314.2 314.23L432 432M208 96v112H96M197.8 197.77L80 80M416 208H304V96M314.23 197.8L432 80M96 304h112v112M197.77 314.2L80 432"
                />
              </svg>
              <div
                class="m-auto"
                x-text="!settings.fullScreenCon ? 'Enable Full Screen' : 'Exit Full Screen'"
              ></div>
            </div>
            <div
              class="text-gray-500"
              :class="!settings.fullScreenCon ? 'group-hover:text-blue-500' : 'group-hover:text-red-500'"
            >
              Ctrl+Shift+F
            </div>
          </div>
          <!-- 
          <div
            x-data="{ isAnimating: false }"
            @mouseenter="isAnimating = true"
            @animationend="isAnimating = false"
            @click="settings.openHelp=true;settings.openMainMenu=false"
            class="flex group justify-between items-center hover:text-yellow-500 cursor-pointer p-2 rounded-lg"
          >
            <div class="flex gap-3">
              <svg
                :class="{'animate__rotateIn': isAnimating}"
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 m-auto animate__animated"
                viewBox="0 0 512 512"
              >
                <circle
                  cx="256"
                  cy="256"
                  r="208"
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="32"
                />
                <circle
                  cx="256"
                  cy="256"
                  r="80"
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="32"
                />
                <path
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="32"
                  d="M208 54l8 132M296 186l8-132M208 458l8-132M296 326l8 132M458 208l-132 8M326 296l132 8M54 208l132 8M186 296l-132 8"
                />
              </svg>
              <div class="m-auto">Help</div>
            </div>
            <div class="text-gray-500 group-hover:text-yellow-500">?</div>
          </div> -->
          <div
            class="border-t border-b py-2 border-slate-100 dark:border-slate-700"
          >
            <div class="flex gap-3 justify-between">
              <div
                x-data="{ isAnimating: false }"
                @mouseenter="isAnimating = true"
                @animationend="isAnimating = false"
                class="flex place-items-start flex-col text-left group hover:text-green-500 cursor-pointer p-2 rounded-lg w-full"
              >
                <div class="flex gap-2 my-1">
                  <svg
                    :class="{'animate__slideInLeft': isAnimating}"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 animate__animated"
                    viewBox="0 0 512 512"
                  >
                    <path
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                      d="M400 160l64 64-64 64"
                    />
                    <path
                      d="M448 224H154c-58.76 0-106 49.33-106 108v20"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                  </svg>
                  <div class="">Redo</div>
                </div>
                <div class="text-gray-500 group-hover:text-green-500">
                  Ctrl+Shift+Y
                </div>
              </div>
              <div
                x-data="{ isAnimating: false }"
                @mouseenter="isAnimating = true"
                @animationend="isAnimating = false"
                class="flex place-items-end flex-col text-left group hover:text-red-500 cursor-pointer p-2 rounded-lg w-full"
              >
                <div class="flex gap-2 my-1">
                  <div class="">Undo</div>

                  <svg
                    :class="{'animate__slideInRight': isAnimating}"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 animate__animated"
                    viewBox="0 0 512 512"
                  >
                    <path
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                      d="M112 160l-64 64 64 64"
                    />
                    <path
                      d="M64 224h294c58.76 0 106 49.33 106 108v20"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                  </svg>
                </div>
                <div class="text-gray-500 group-hover:text-red-500">
                  Ctrl+Shift+Z
                </div>
              </div>
            </div>
            <div
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              @click="settings.darkMode = !settings.darkMode"
              class="flex group justify-between items-center cursor-pointer p-2 rounded-lg"
            >
              <div
                class="flex gap-3"
                :class="settings.darkMode ? 'group-hover:text-yellow-500' : 'group-hover:text-blue-500'"
              >
                <svg
                  :class="{'animate__rotateIn': isAnimating}"
                  xmlns="http://www.w3.org/2000/svg"
                  x-show="!settings.darkMode"
                  class="w-5 h-5 animate__animated"
                  viewBox="0 0 512 512"
                >
                  <path
                    d="M160 136c0-30.62 4.51-61.61 16-88C99.57 81.27 48 159.32 48 248c0 119.29 96.71 216 216 216 88.68 0 166.73-51.57 200-128-26.39 11.49-57.38 16-88 16-119.29 0-216-96.71-216-216z"
                    fill="none"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="32"
                  />
                </svg>
                <svg
                  :class="{'animate__rotateIn': isAnimating}"
                  x-show="settings.darkMode"
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-5 h-5 m-auto animate__animated"
                  viewBox="0 0 512 512"
                >
                  <path
                    fill="none"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-miterlimit="10"
                    stroke-width="32"
                    d="M256 48v48M256 416v48M403.08 108.92l-33.94 33.94M142.86 369.14l-33.94 33.94M464 256h-48M96 256H48M403.08 403.08l-33.94-33.94M142.86 142.86l-33.94-33.94"
                  />
                  <circle
                    cx="256"
                    cy="256"
                    r="80"
                    fill="none"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-miterlimit="10"
                    stroke-width="32"
                  />
                </svg>
                <div
                  class="m-auto"
                  x-text="settings.darkMode ? 'Enable Light Mode' : 'Enable Dark Mode'"
                ></div>
              </div>
              <div
                class="text-gray-500"
                :class="settings.darkMode ? 'group-hover:text-yellow-500' : 'group-hover:text-blue-500'"
              >
                Shift+Alt+D
              </div>
            </div>
            <div class="my-3 mx-2">
              <div class="m-auto">Canvas Background</div>
              <div class="grid grid-cols-12 my-2">
                <div
                  @click="settings.bgColor='bg-blue-500'"
                  class="w-4 h-10 transform transition-transform duration-50 hover:scale-125 bg-blue-500 rounded-md cursor-pointer"
                ></div>

                <div
                  @click="settings.bgColor='bg-green-500'"
                  class="w-4 h-10 transform transition-transform duration-50 hover:scale-125 bg-green-500 rounded-md cursor-pointer"
                ></div>

                <div
                  @click="settings.bgColor='bg-purple-500'"
                  class="w-4 h-10 transform transition-transform duration-50 hover:scale-125 bg-purple-500 rounded-md cursor-pointer"
                ></div>
                <div
                  @click="settings.bgColor='bg-yellow-500'"
                  class="w-4 h-10 transform transition-transform duration-50 hover:scale-125 bg-yellow-500 rounded-md cursor-pointer"
                ></div>

                <div
                  @click="settings.bgColor='bg-red-500'"
                  class="w-4 h-10 transform transition-transform duration-50 hover:scale-125 bg-red-500 rounded-md cursor-pointer"
                ></div>

                <div
                  @click="settings.bgColor='bg-slate-900'"
                  class="w-4 h-10 transform transition-transform duration-50 hover:scale-125 bg-slate-900 rounded-md cursor-pointer"
                ></div>
                <div
                  @click="settings.bgColor='bg-white'"
                  class="w-4 h-10 transform transition-transform duration-50 hover:scale-125 border bg-white rounded-md cursor-pointer"
                ></div>
              </div>
            </div>
          </div>
          <div class="flex justify-between">
            <!-- <div
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              class="flex hover:text-yellow-500 cursor-pointer p-2 rounded-lg w-full"
            >
              <div class="flex justify-start gap-3">
                <svg
                  :class="{'animate__rollIn': isAnimating}"
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-5 h-5 animate__animated"
                  viewBox="0 0 512 512"
                >
                  <path
                    d="M320 458.16S304 464 256 464s-74-16-96-32H96a64 64 0 01-64-64v-48a64 64 0 0164-64h30a32.34 32.34 0 0027.37-15.4S162 221.81 188 176.78 264 64 272 48c29 0 43 22 34 47.71-10.28 29.39-23.71 54.38-27.46 87.09-.54 4.78 3.14 12 7.95 12L416 205"
                    fill="none"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="32"
                  />
                  <path
                    d="M416 271l-80-2c-20-1.84-32-12.4-32-30h0c0-17.6 14-28.84 32-30l80-4c17.6 0 32 16.4 32 34v.17A32 32 0 01416 271zM448 336l-112-2c-18-.84-32-12.41-32-30h0c0-17.61 14-28.86 32-30l112-2a32.1 32.1 0 0132 32h0a32.1 32.1 0 01-32 32zM400 464l-64-3c-21-1.84-32-11.4-32-29h0c0-17.6 14.4-30 32-30l64-2a32.09 32.09 0 0132 32h0a32.09 32.09 0 01-32 32zM432 400l-96-2c-19-.84-32-12.4-32-30h0c0-17.6 13-28.84 32-30l96-2a32.09 32.09 0 0132 32h0a32.09 32.09 0 01-32 32z"
                    fill="none"
                    stroke="currentColor"
                    stroke-miterlimit="10"
                    stroke-width="32"
                  />
                </svg>
                <div class="self-center">Give Reviews</div>
              </div>
            </div> -->
            <div
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              @click="settings.openMainMenu = false;settings.MainMenu = true"
              class="hover:text-red-500 cursor-pointer p-2 rounded-lg w-full"
            >
              <div class="flex justify-end gap-2">
                <svg
                  :class="{'animate__rotateIn': isAnimating}"
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-5 h-5 animate__animated"
                  viewBox="0 0 512 512"
                >
                  <path
                    fill="none"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="32"
                    d="M368 368L144 144M368 144L144 368"
                  />
                </svg>
                <div class="self-center">Close</div>
              </div>
            </div>
          </div>
        </div>
        <!-- main page end -->
        <!-- project page start -->
        <div
          x-show="settings.openProjectMenu"
          class="animate__animated animate__fadeInDownBig h-fit w-[270px] bg-white rounded-lg dark:bg-slate-800 dark:text-slate-100 flex flex-col gap-1 p-2 text-xs border dark:border-slate-700"
        >
          <div
            x-show="projects.addProjectOpen"
            class="flex justify-between items-center p-2 gap-1 rounded-lg w-full"
          >
            <svg
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              @click="projects.addProjectOpen = false"
              :class="{'animate__rotateIn': isAnimating}"
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5 m-auto animate__animated hover:text-red-500 cursor-pointer"
              viewBox="0 0 512 512"
            >
              <path
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="32"
                d="M368 368L144 144M368 144L144 368"
              />
            </svg>
            <input
              x-model="projects.fileName"
              @keyup.enter="createFolderOrFile(projects.fileName)"
              class="h-8 p-2 rounded-lg w-full outline-none dark:bg-slate-700 bg-slate-100"
              type="text"
              placeholder="Please Enter Project Name ..."
            />
          </div>
          <div
            x-show="projects.addElementOpen"
            class="flex justify-between items-center p-2 gap-1 rounded-lg w-full"
          >
            <svg
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              @click="projects.addElementOpen = false"
              :class="{'animate__rotateIn': isAnimating}"
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5 m-auto animate__animated hover:text-red-500 cursor-pointer"
              viewBox="0 0 512 512"
            >
              <path
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="32"
                d="M368 368L144 144M368 144L144 368"
              />
            </svg>
            <input
              x-model="projects.fileName"
              @keyup.enter="createFolderOrFile(projects.fileName,null,null,true)"
              class="h-8 p-2 rounded-lg w-full outline-none dark:bg-slate-700 bg-slate-100"
              type="text"
              placeholder="Please Enter Element Name ..."
            />
          </div>
          <div
            x-show="projects.addSearchOpen"
            class="flex gap-1 justify-between items-center p-2 rounded-lg"
          >
            <svg
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              :class="{'animate__rotateIn': isAnimating}"
              @click="projects.addSearchOpen = false"
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5 m-auto animate__animated rounded-lg hover:text-red-500 cursor-pointer"
              viewBox="0 0 512 512"
            >
              <path
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="32"
                d="M368 368L144 144M368 144L144 368"
              />
            </svg>
            <input
              x-model="projects.searchValue"
              @keyup.enter="searchFile(projects.searchValue)"
              class="h-8 p-2 rounded-lg w-full outline-none dark:bg-slate-700 bg-slate-100"
              type="text"
              placeholder="Search Here ..."
            />
          </div>
          <div
            x-show="!projects.addProjectOpen && !projects.addSearchOpen && ! projects.addElementOpen"
            class="flex justify-between p-2"
          >
            <svg
              x-show="!projects.currentFolder.base"
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              @click="navigateBack"
              :class="{'animate__slideInRight': isAnimating}"
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5 animate__animated hover:text-blue-500"
              viewBox="0 0 512 512"
            >
              <path
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="48"
                d="M328 112L184 256l144 144"
              />
            </svg>

            <div
              x-text="projects.currentFolder.name"
              class="hover:text-blue-500"
            ></div>
            <div class="flex group gap-2">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 m-auto hover:text-yellow-500"
                viewBox="0 0 512 512"
              >
                <circle
                  cx="256"
                  cy="256"
                  r="32"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="32"
                />
                <circle
                  cx="256"
                  cy="416"
                  r="32"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="32"
                />
                <circle
                  cx="256"
                  cy="96"
                  r="32"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="32"
                />
              </svg>
              <ul
                class="absolute -right-24 z-50 bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-lg flex flex-col p-1 w-fit gap-2 group-hover:block hidden"
              >
                <li
                  class="flex gap-3 hover:text-orange-500 p-2 cursor-pointer"
                  x-data="{ isAnimating: false }"
                  @mouseenter="isAnimating = true"
                  @animationend="isAnimating = false"
                  x-show="! projects.addProjectOpen && projects.currentFolder.isElement || projects.currentFolder.isFile"
                  @click="projects.addElementOpen=true"
                >
                  <!-- @click="settings.openElementMenu=true;settings.openProjectMenu=false;"projects.addElementOpen -->
                  <svg
                    :class="{'animate__rotateIn': isAnimating}"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 animate__animated"
                    viewBox="0 0 512 512"
                  >
                    <path
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                      d="M256 112v288M400 256H112"
                    />
                  </svg>
                  <div class="">Add Element</div>
                </li>
                <li
                  class="flex gap-3 hover:text-orange-500 p-2 cursor-pointer"
                  x-data="{ isAnimating: false }"
                  @mouseenter="isAnimating = true"
                  @animationend="isAnimating = false"
                  x-show="! projects.addProjectOpen && projects.currentFolder.isFile === undefined && projects.currentFolder.isElement !== true"
                  @click="projects.addProjectOpen = true"
                >
                  <svg
                    :class="{'animate__rotateIn': isAnimating}"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 animate__animated"
                    viewBox="0 0 512 512"
                  >
                    <path
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                      d="M256 112v288M400 256H112"
                    />
                  </svg>
                  <div class="">Add Folder / File</div>
                </li>
                <!-- <li
                  class="flex gap-3 hover:text-orange-500 p-2 cursor-pointer"
                  x-data="{ isAnimating: false }"
                  @mouseenter="isAnimating = true"
                  @animationend="isAnimating = false"
                  x-show="! projects.addProjectOpen && projects.currentFolder.isFile === undefined"
                  @click="openFileUpload"
                >
                  <svg
                    :class="{'animate__slideInDown': isAnimating}"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 m-auto animate__animated"
                    viewBox="0 0 512 512"
                  >
                    <path
                      d="M320 336h76c55 0 100-21.21 100-75.6s-53-73.47-96-75.6C391.11 99.74 329 48 256 48c-69 0-113.44 45.79-128 91.2-60 5.7-112 35.88-112 98.4S70 336 136 336h56M192 400.1l64 63.9 64-63.9M256 224v224.03"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                  </svg>
                  <div>Import Project</div>
                </li> -->
                <li
                  class="flex gap-3 hover:text-blue-500 p-2 cursor-pointer"
                  x-data="{ isAnimating: false }"
                  @mouseenter="isAnimating = true"
                  @animationend="isAnimating = false"
                  @click="projects.addSearchOpen = true"
                  x-show="! projects.addSearchOpen"
                >
                  <svg
                    :class="{'animate__bounceIn': isAnimating}"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 animate__animated"
                    viewBox="0 0 512 512"
                  >
                    <path
                      d="M35.4 87.12l168.65 196.44A16.07 16.07 0 01208 294v119.32a7.93 7.93 0 005.39 7.59l80.15 26.67A7.94 7.94 0 00304 440V294a16.07 16.07 0 014-10.44L476.6 87.12A14 14 0 00466 64H46.05A14 14 0 0035.4 87.12z"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                  </svg>
                  <div>Search Here</div>
                </li>
                <li
                  class="flex gap-3 hover:text-green-500 p-2 cursor-pointer"
                  x-data="{ isAnimating: false }"
                  @mouseenter="isAnimating = true"
                  @animationend="isAnimating = false"
                  @click="pastInside()"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 animate__animated"
                    viewBox="0 0 512 512"
                  >
                    <rect
                      x="128"
                      y="128"
                      width="336"
                      height="336"
                      rx="57"
                      ry="57"
                      fill="none"
                      stroke="currentColor"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                    <path
                      d="M383.5 128l.5-24a56.16 56.16 0 00-56-56H112a64.19 64.19 0 00-64 64v216a56.16 56.16 0 0056 56h24"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                  </svg>
                  <div>Past Here</div>
                </li>
                <li
                  class="flex gap-3 hover:text-red-500 p-2 cursor-pointer"
                  x-data="{ isAnimating: false }"
                  @mouseenter="isAnimating = true"
                  @animationend="isAnimating = false"
                  @click="DeleteAll()"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 animate__animated"
                    viewBox="0 0 512 512"
                  >
                    <path
                      d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-miterlimit="10"
                      stroke-width="32"
                      d="M80 112h352"
                    />
                    <path
                      d="M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                  </svg>
                  <div>Delete All</div>
                </li>
              </ul>
            </div>
          </div>
          <div
            class="border-t border-b py-2 border-slate-100 dark:border-slate-700"
          >
            <div
              x-show="!projects.currentFolder.children.length  > 0 "
              class="my-10 hover:text-orange-500 gap-6 flex flex-col"
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              @click="projects.addProjectOpen = true"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-10 h-10 mx-auto animate__animated"
                :class="{'animate__rotateIn': isAnimating}"
                viewBox="0 0 512 512"
              >
                <path
                  d="M448 225.64v99a64 64 0 01-40.23 59.42l-23.68 9.47A32 32 0 00364.6 417l-10 50.14A16 16 0 01338.88 480H173.12a16 16 0 01-15.69-12.86L147.4 417a32 32 0 00-19.49-23.44l-23.68-9.47A64 64 0 0164 324.67V224c0-105.92 85.77-191.81 191.65-192S448 119.85 448 225.64z"
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-miterlimit="10"
                  stroke-width="32"
                />
                <circle
                  cx="168"
                  cy="280"
                  r="40"
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-miterlimit="10"
                  stroke-width="32"
                />
                <circle
                  cx="344"
                  cy="280"
                  r="40"
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-miterlimit="10"
                  stroke-width="32"
                />
                <path
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="32"
                  d="M256 336l-16 48h32l-16-48zM256 448v32M208 448v32M304 448v32"
                />
              </svg>
              <div
                class="flex gap-3 p-2 cursor-pointer m-auto"
                x-show="! projects.addProjectOpen"
              >
                <div class="flex flex-col">
                  <div class="">Empty, Add from here !</div>
                </div>
              </div>
            </div>
            <!-- <template x-if="projects.currentFolder.children.length"></template> -->
            <template x-for="(f, index) in projects.currentFolder.children">
              <div
                draggable="true"
                @dragstart="dragging = index"
                @dragover.prevent="dragging !== null && dragover(index)"
                @dragend="dragging = null"
                x-bind:class="{ 'border border-green-500 text-green-500': dragging === index }"
                class="flex relative justify-between cursor-pointer p-2 rounded-lg"
              >
                <div class="flex gap-3">
                  <svg
                    x-show="f.isFolder===true"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 m-auto"
                    viewBox="0 0 512 512"
                  >
                    <path
                      d="M440 432H72a40 40 0 01-40-40V120a40 40 0 0140-40h75.89a40 40 0 0122.19 6.72l27.84 18.56a40 40 0 0022.19 6.72H440a40 40 0 0140 40v240a40 40 0 01-40 40zM32 192h448"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                  </svg>
                  <svg
                    x-show="f.isFile===true"
                    x-bind:class="{ 'text-green-500': dragging === index }"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 m-auto hover:text-green-500"
                    viewBox="0 0 512 512"
                  >
                    <path
                      d="M416 221.25V416a48 48 0 01-48 48H144a48 48 0 01-48-48V96a48 48 0 0148-48h98.75a32 32 0 0122.62 9.37l141.26 141.26a32 32 0 019.37 22.62z"
                      fill="none"
                      stroke="currentColor"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                    <path
                      d="M256 56v120a32 32 0 0032 32h120"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                  </svg>
                  <svg
                    x-show="f.isElement===true"
                    x-bind:class="{ 'text-green-500': dragging === index }"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 m-auto hover:text-green-500"
                    viewBox="0 0 512 512"
                  >
                    <path
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                      d="M160 368L32 256l128-112M352 368l128-112-128-112M304 96l-96 320"
                    />
                  </svg>
                  <div
                    @click="navigateToChild(f.id)"
                    class="flex gap-1 hover:text-green-500"
                  >
                    <div class="m-auto" x-text="f.name"></div>
                  </div>
                </div>
                <div class="flex group gap-2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 m-auto hover:text-yellow-500"
                    viewBox="0 0 512 512"
                  >
                    <circle
                      cx="256"
                      cy="256"
                      r="32"
                      fill="none"
                      stroke="currentColor"
                      stroke-miterlimit="10"
                      stroke-width="32"
                    />
                    <circle
                      cx="256"
                      cy="416"
                      r="32"
                      fill="none"
                      stroke="currentColor"
                      stroke-miterlimit="10"
                      stroke-width="32"
                    />
                    <circle
                      cx="256"
                      cy="96"
                      r="32"
                      fill="none"
                      stroke="currentColor"
                      stroke-miterlimit="10"
                      stroke-width="32"
                    />
                  </svg>
                  <ul
                    class="absolute -right-24 z-50 bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-lg flex flex-col p-1 w-fit gap-2 group-hover:block hidden"
                  >
                    <!-- <li
                      x-show="!f.isElement"
                      class="flex gap-3 hover:text-orange-500 p-2 cursor-pointer"
                      @click="exportFolderAsJSON(f)"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5 animate__animated"
                        viewBox="0 0 512 512"
                      >
                        <path
                          d="M461.93 261.05c-2-4.76-6.71-7.83-11.67-9.49l-187.18-74.48a23.78 23.78 0 00-14.17 0l-187 74.52c-5 1.56-9.83 4.77-11.81 9.53s-2.94 9.37-1 15.08l46.53 119.15a7.46 7.46 0 007.47 4.64c26.69-1.68 50.31-15.23 68.38-32.5a7.66 7.66 0 0110.49 0C201.29 386 227 400 256 400s54.56-14 73.88-32.54a7.67 7.67 0 0110.5 0c18.07 17.28 41.69 30.86 68.38 32.54a7.45 7.45 0 007.46-4.61l46.7-119.16c1.98-4.78.99-10.41-.99-15.18z"
                          fill="none"
                          stroke="currentColor"
                          stroke-miterlimit="10"
                          stroke-width="32"
                        ></path>
                        <path
                          fill="currentColor"
                          stroke="currentColor"
                          d="M416 473.14a6.84 6.84 0 00-3.56-6c-27.08-14.55-51.77-36.82-62.63-48a10.05 10.05 0 00-12.72-1.51c-50.33 32.42-111.61 32.44-161.95.05a10.09 10.09 0 00-12.82 1.56c-10.77 11.28-35.19 33.3-62.43 47.75a7.15 7.15 0 00-3.89 5.73 6.73 6.73 0 007.92 7.15c20.85-4.18 41-13.68 60.2-23.83a8.71 8.71 0 018-.06A185.14 185.14 0 00340 456a8.82 8.82 0 018.09.06c19.1 10 39.22 19.59 60 23.8a6.72 6.72 0 007.95-6.71z"
                        ></path>
                        <path
                          d="M320 96V72a24.07 24.07 0 00-24-24h-80a24.07 24.07 0 00-24 24v24M416 233v-89a48.14 48.14 0 00-48-48H144a48.14 48.14 0 00-48 48v92M256 183.6v212.85"
                          fill="none"
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="32"
                        ></path>
                      </svg>
                      <div class="">Export Project</div>
                    </li> -->
                    <li
                      x-show="f.isElement"
                      class="flex gap-3 hover:text-orange-500 p-2 cursor-pointer"
                      @click="editElement(f);"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5 animate__animated"
                        viewBox="0 0 512 512"
                      >
                        <path
                          d="M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48"
                          fill="none"
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="32"
                        />
                        <path
                          fill="currentColor"
                          stroke="currentColor"
                          d="M459.94 53.25a16.06 16.06 0 00-23.22-.56L424.35 65a8 8 0 000 11.31l11.34 11.32a8 8 0 0011.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90L218.82 270.2a9 9 0 00-2.31 3.93L208.16 299a3.91 3.91 0 004.86 4.86l24.85-8.35a9 9 0 003.93-2.31L422 112.66a9 9 0 000-12.66l-9.95-10a9 9 0 00-12.71 0z"
                        />
                      </svg>
                      <div>Edit Element</div>
                    </li>
                    <li
                      x-show="!f.isElement"
                      class="flex gap-3 hover:text-orange-500 p-2 cursor-pointer"
                      @click="rename(f.name,f)"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5 animate__animated"
                        viewBox="0 0 512 512"
                      >
                        <path
                          d="M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48"
                          fill="none"
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="32"
                        />
                        <path
                          fill="currentColor"
                          stroke="currentColor"
                          d="M459.94 53.25a16.06 16.06 0 00-23.22-.56L424.35 65a8 8 0 000 11.31l11.34 11.32a8 8 0 0011.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90L218.82 270.2a9 9 0 00-2.31 3.93L208.16 299a3.91 3.91 0 004.86 4.86l24.85-8.35a9 9 0 003.93-2.31L422 112.66a9 9 0 000-12.66l-9.95-10a9 9 0 00-12.71 0z"
                        />
                      </svg>
                      <div>Rename</div>
                    </li>
                    <li
                      class="flex gap-3 hover:text-blue-500 p-2 cursor-pointer"
                      @click="justcopy(f)"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5 animate__animated"
                        viewBox="0 0 512 512"
                      >
                        <rect
                          x="128"
                          y="128"
                          width="336"
                          height="336"
                          rx="57"
                          ry="57"
                          fill="none"
                          stroke="currentColor"
                          stroke-linejoin="round"
                          stroke-width="32"
                        />
                        <path
                          d="M383.5 128l.5-24a56.16 56.16 0 00-56-56H112a64.19 64.19 0 00-64 64v216a56.16 56.16 0 0056 56h24"
                          fill="none"
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="32"
                        />
                      </svg>
                      <div>Copy</div>
                    </li>
                    <!-- <li
                      class="flex gap-3 hover:text-blue-500 p-2 cursor-pointer"
                      @click="copy(f)"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5 animate__animated"
                        viewBox="0 0 512 512"
                      >
                        <rect
                          x="128"
                          y="128"
                          width="336"
                          height="336"
                          rx="57"
                          ry="57"
                          fill="none"
                          stroke="currentColor"
                          stroke-linejoin="round"
                          stroke-width="32"
                        />
                        <path
                          d="M383.5 128l.5-24a56.16 56.16 0 00-56-56H112a64.19 64.19 0 00-64 64v216a56.16 56.16 0 0056 56h24"
                          fill="none"
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="32"
                        />
                      </svg>
                      <div>Copy Template</div>
                    </li> -->
                    <li
                      class="flex gap-3 hover:text-green-500 p-2 cursor-pointer"
                      @click="past(f)"
                      x-show="f.isFolder"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5 animate__animated"
                        viewBox="0 0 512 512"
                      >
                        <path
                          d="M336 64h32a48 48 0 0148 48v320a48 48 0 01-48 48H144a48 48 0 01-48-48V112a48 48 0 0148-48h32"
                          fill="none"
                          stroke="currentColor"
                          stroke-linejoin="round"
                          stroke-width="32"
                        />
                        <rect
                          x="176"
                          y="32"
                          width="160"
                          height="64"
                          rx="26.13"
                          ry="26.13"
                          fill="none"
                          stroke="currentColor"
                          stroke-linejoin="round"
                          stroke-width="32"
                        />
                      </svg>
                      <div>Past</div>
                    </li>
                    <li
                      class="flex gap-3 hover:text-red-500 p-2 cursor-pointer"
                      @click="deleteChild(f.name)"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5 animate__animated"
                        viewBox="0 0 512 512"
                      >
                        <path
                          d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320"
                          fill="none"
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="32"
                        />
                        <path
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-miterlimit="10"
                          stroke-width="32"
                          d="M80 112h352"
                        />
                        <path
                          d="M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224"
                          fill="none"
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="32"
                        />
                      </svg>
                      <div>Delete</div>
                    </li>
                  </ul>
                </div>
              </div>
            </template>
          </div>
          <div class="flex justify-between">
            <div
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              @click="settings.openMainMenu = true;settings.openProjectMenu=false;"
              class="hover:text-blue-500 cursor-pointer p-2 rounded-lg w-full"
            >
              <div class="flex gap-2">
                <svg
                  :class="{'animate__slideInRight': isAnimating}"
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-5 h-5 animate__animated"
                  viewBox="0 0 512 512"
                >
                  <path
                    fill="none"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="48"
                    d="M328 112L184 256l144 144"
                  />
                </svg>
                <div class="self-center">Go Back</div>
              </div>
            </div>
            <div
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              @click="settings.openProjectMenu = false;settings.MainMenu = true"
              class="hover:text-red-500 cursor-pointer p-2 rounded-lg w-full"
            >
              <div class="flex justify-end gap-2">
                <svg
                  :class="{'animate__rotateIn': isAnimating}"
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-5 h-5 animate__animated"
                  viewBox="0 0 512 512"
                >
                  <path
                    fill="none"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="32"
                    d="M368 368L144 144M368 144L144 368"
                  />
                </svg>
                <div class="self-center">Close</div>
              </div>
            </div>
          </div>
        </div>
        <!-- project page end -->
        <!-- element page start -->
        <div
          x-show="settings.openElementMenu"
          class="animate__animated animate__fadeInDownBig h-fit w-[270px] bg-white dark:bg-slate-800 rounded-lg dark:text-slate-100 flex flex-col gap-1 p-2 text-xs border dark:border-slate-700"
        >
          General
          <input
            x-model="element.name"
            class="p-2 h-8 rounded-lg w-full outline-none dark:bg-slate-700 bg-slate-100"
            placeholder="Please Enter Your Element Name Here ..."
            type="text"
          />
          <input
            @keyup.enter="addClass($el)"
            class="p-2 h-8 rounded-lg w-full outline-none dark:bg-slate-700 bg-slate-100"
            placeholder="Please Enter Your Classes Here ..."
            type="text"
          />

          <div class="flex flex-auto flex-wrap">
            <template x-for="(c, index) in element.classes">
              <div
                x-data="{ isAnimating: false }"
                @mouseenter="isAnimating = true"
                @animationend="isAnimating = false"
                class="flex cursor-pointer justify-center items-center hover:text-red-500 hover:bg-red-100 m-1 font-medium py-1 px-2 bg-white rounded-md text-green-700 bg-green-100 dark:bg-slate-800 border border-green-300 hover:border-red-500"
              >
                <div
                  x-text="c"
                  class="text-xs font-normal leading-none max-w-full flex-initial"
                ></div>
                <div class="flex flex-auto flex-row-reverse">
                  <div>
                    <svg
                      @click="removeClass(index)"
                      :class="{'animate__rotateIn': isAnimating}"
                      xmlns="http://www.w3.org/2000/svg"
                      width="100%"
                      height="100%"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="cursor-pointer hover:text-red-400 rounded-full w-4 h-4 ml-2 animate__animated"
                    >
                      <line x1="18" y1="6" x2="6" y2="18"></line>
                      <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                  </div>
                </div>
              </div>
            </template>
          </div>
          Inner Content
          <div class="flex gap-2">
            <textarea
              x-model="element.content"
              placeholder="Please Enter Your Content Here ..."
              class="p-2 rounded-lg w-full outline-none dark:bg-slate-700 bg-slate-100"
              cols="30"
              rows="1"
            ></textarea>
          </div>
          Attribute
          <div class="flex gap-2">
            <div class="flex flex-col gap-2">
              <input
                x-model="attNameRef"
                class="p-2 h-8 rounded-lg w-full outline-none dark:bg-slate-700 bg-slate-100"
                placeholder="Please Enter Your Attribute Here ..."
                type="text"
              />
              <textarea
                x-model="attValueRef"
                placeholder="Please Enter Your Property Here ..."
                class="p-2 rounded-lg w-full outline-none dark:bg-slate-700 bg-slate-100"
                cols="30"
                rows="1"
              ></textarea>
            </div>
          </div>
          <div
            @click="addAttribute($refs.name,$refs.value)"
            class="flex justify-between items-center hover:text-green-500 p-2 rounded-lg"
            x-data="{ isAnimating: false }"
            @mouseenter="isAnimating = true"
            @animationend="isAnimating = false"
          >
            <div class="flex gap-3">
              <svg
                :class="{'animate__rotateIn': isAnimating}"
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 m-auto animate__animated"
                viewBox="0 0 512 512"
              >
                <path
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="32"
                  d="M256 112v288M400 256H112"
                />
              </svg>
              <div class="m-auto">Add Attribute</div>
            </div>
            <div class="text-gray-500 dark:group-hover:text-slate-100"></div>
          </div>
          <div class="flex flex-auto flex-wrap">
            <template x-for="(a, index) in element.attributes">
              <div
                x-data="{ isAnimating: false }"
                @mouseenter="isAnimating = true"
                @animationend="isAnimating = false"
                class="flex cursor-pointer justify-center items-center hover:text-red-500 hover:bg-red-100 m-1 font-medium py-1 px-2 bg-white rounded-md text-green-700 bg-green-100 dark:bg-slate-800 border border-green-300 hover:border-red-500"
              >
                <div
                  x-text="a.name"
                  class="text-xs font-normal leading-none max-w-full flex-initial"
                ></div>
                <div class="mx-1">:</div>

                <div
                  x-text="a.value"
                  class="text-xs font-normal w-4 truncate text-clip"
                ></div>
                <div class="flex flex-auto flex-row-reverse">
                  <div>
                    <svg
                      @click="removeAttribute(index)"
                      :class="{'animate__rotateIn': isAnimating}"
                      xmlns="http://www.w3.org/2000/svg"
                      width="100%"
                      height="100%"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="cursor-pointer hover:text-red-400 rounded-full w-4 h-4 ml-2 animate__animated"
                    >
                      <line x1="18" y1="6" x2="6" y2="18"></line>
                      <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                  </div>
                </div>
              </div>
            </template>
          </div>

          <div
            class="flex justify-between border-t pt-2 mt-2 dark:border-slate-600"
          >
            <div
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              @click="settings.openElementMenu=false;settings.openProjectMenu=true;"
              class="hover:text-blue-500 cursor-pointer p-2 rounded-lg w-full"
            >
              <div class="flex gap-2">
                <svg
                  :class="{'animate__slideInRight': isAnimating}"
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-5 h-5 animate__animated"
                  viewBox="0 0 512 512"
                >
                  <path
                    fill="none"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="48"
                    d="M328 112L184 256l144 144"
                  />
                </svg>
                <div class="self-center">Go Back</div>
              </div>
            </div>
            <div
              x-data="{ isAnimating: false }"
              @mouseenter="isAnimating = true"
              @animationend="isAnimating = false"
              @click="settings.openElementMenu = false;settings.MainMenu = true"
              class="hover:text-red-500 cursor-pointer p-2 rounded-lg w-full"
            >
              <div class="flex justify-end gap-2">
                <svg
                  :class="{'animate__rotateIn': isAnimating}"
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-5 h-5 animate__animated"
                  viewBox="0 0 512 512"
                >
                  <path
                    fill="none"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="32"
                    d="M368 368L144 144M368 144L144 368"
                  />
                </svg>
                <div class="self-center">Close</div>
              </div>
            </div>
          </div>
        </div>
        <!-- element page end -->
      </div>
      <!-- flowting div end -->
    </div>
  </body>
  <script>
    function moveArrayItem(array, fromIndex, toIndex) {
      const item = array.splice(fromIndex, 1)[0];
      array.splice(toIndex, 0, item);
    }
    function findObjectById(root, id) {
      if (root.id == id) {
        console.log("Object found:", root);
        return root;
      }

      for (const child of root.children) {
        const result = findObjectById(child, id);
        if (result) {
          return result;
        }
      }

      if (root.children && root.children.length > 0) {
        for (const child of root.children) {
          const result = findObjectById(child, id);
          if (result) {
            return result;
          }
        }
      }

      return null; // Return null if the object with the specified id is not found
    }

    document.addEventListener("alpine:init", () => {
      Alpine.data("tailBlast", () => {
        const storedData = JSON.parse(localStorage.getItem("tailBlast")) || {};
        const projectsData = JSON.parse(localStorage.getItem("projects")) || {
          id: Date.now(),
          name: "Main Projects Page",
          children: [],
          content: null,
        };
        projectsData.selectedFile = null;
        const root = {
          id: Date.now(),
          name: "Main Projects Page",
          children: [],
          content: null,
          base: true,
        };
        return {
          settings: {
            MainMenu: true,
            openMainMenu: false,
            openProjectMenu: false,
            openFolderMenu: false,
            openElementMenu: false,
            openEditorMenu: false,
            openAttributeMenu: false,
            openContentMenu: false,
            darkMode: false,
            fullScreenCon: false,
            openAbout: false,
            openHelp: false,
            isDragging: false,
            bgColor: "bg-white",
            top: 10,
            left: 10,
            xOffset: 0,
            yOffset: 0,

            ...storedData.settings, // Merge with stored settings
          },
          projects: {
            addProjectOpen: false,
            addElementOpen: false,
            addSearchOpen: false,
            fileName: "",
            searchValue: "",
            selectedFile: null,
            dragging: null,
            currentCopy: null,
            root: root,
            currentFolder: root,
            folderStack: [],
            copyedElement: null,
            ...projectsData.projects,
          },
          element: {},
          attNameRef: "",
          attValueRef: "",
          template: "",
          hasRun: false,
          r: [],
          openMainMenu() {
            this.settings.openMainMenu = true;
            this.settings.MainMenu = false;
          },
          startDragging(event) {
            this.settings.isDragging = true;
            this.settings.xOffset = event.clientX - this.settings.left;
            this.settings.yOffset = event.clientY - this.settings.top;
          },
          dragging(event) {
            if (this.settings.isDragging) {
              this.settings.top = event.clientY - this.settings.yOffset;
              this.settings.left = event.clientX - this.settings.xOffset;
            }
          },
          stopDragging() {
            this.settings.isDragging = false;
          },
          fullscreen() {
            if (this.settings.fullScreenCon) {
              document.webkitExitFullscreen();
              this.settings.fullScreenCon = false;
            } else {
              document.documentElement.webkitRequestFullscreen();
              this.settings.fullScreenCon = true;
            }
          },
          change(value) {
            localStorage.setItem(
              "tailBlast",
              JSON.stringify({ settings: this.settings })
            );
            localStorage.setItem(
              "projects",
              JSON.stringify({ projects: this.projects })
            );
            console.log("Here are the changes >", this.settings, this.projects);

            if (this.projects.currentFolder.isFile !== undefined) {
              this.r = this.projects.currentFolder;
            }
            if (this.r.isFile) {
              this.render(this.r.children);
            }
            const hoverableElements =
              document.querySelectorAll("#main .hoverable");

            hoverableElements.forEach((element) => {
              element.addEventListener("mouseover", () => {
                element.style.border = "2px dashed red";
              });

              element.addEventListener("mouseout", () => {
                element.style.border = "none";
              });
              element.addEventListener("click", () => {
                var e = findObjectById(this.projects.root, element.id);
                console.log("data ", e, this.projects.root, element.id);
                if(e){
                  this.editElement(e);
                }
                // this.projects.currentFolder=e;
              });
            });
          },
          dragover(index) {
            if (this.dragging !== null) {
              moveArrayItem(
                this.projects.currentFolder.children,
                this.dragging,
                index
              );
              this.dragging = index;
              localStorage.setItem("projects", JSON.stringify(this.root));
            }
          },

          createFolderOrFile(
            name,
            isFolder = true,
            content = null,
            element = null
          ) {
            if (this.projects.selectedFile !== null) {
              this.projects.selectedFile.name = this.projects.fileName;
              this.projects.fileName = "";
              this.projects.addProjectOpen = false;
              this.projects.selectedFile = null;
              return;
            }
            if (name.includes(".html")) {
              const newfile = {
                id: Date.now(),
                name,
                children: [],
                isFile: true,
              };

              this.projects.currentFolder.children.push(newfile);
              this.projects.fileName = "";
              localStorage.setItem(
                "projects",
                JSON.stringify({ projects: this.projects })
              );
              return;
            }
            if (element === true) {
              this.projects.currentFolder.children.push({
                id: Date.now(),
                name,
                children: [],
                classes: [],
                attributes: [],
                content: "",
                isElement: true,
              });
              this.projects.fileName = "";
              return;
            }
            const newItem = {
              id: Date.now(),
              name,
              children: isFolder ? [] : null,
              content: isFolder ? null : content,
              isFolder: isFolder,
            };
            this.projects.currentFolder.children.push(newItem);
            this.projects.fileName = "";
          },
          navigateToChild(id) {
            const child = this.projects.currentFolder.children.find(
              (item) => item.id === id
            );
            if (child && child.children !== null) {
              this.projects.folderStack.push(this.projects.currentFolder);
              this.projects.currentFolder = child;
            } else {
              console.log(`Child "${name}" not found or is not a folder.`);
            }
          },
          navigateBack() {
            if (this.projects.folderStack.length > 0) {
              this.projects.currentFolder = this.projects.folderStack.pop();
            } else {
              console.log("You are already at the root.");
            }
          },
          deleteChild(name) {
            const index = this.projects.currentFolder.children.findIndex(
              (item) => item.name === name
            );
            if (index !== -1) {
              this.projects.currentFolder.children.splice(index, 1);
              console.log(`Item "${name}" deleted.`);
            } else {
              console.log(`Item "${name}" not found.`);
            }
          },

          searchFile(fileName) {
            const threshold = 0.4; // Adjust the threshold as needed
            const matches = [];

            fileName = fileName.toLowerCase();
            const fileNameWords = fileName.split(" ");

            for (const item of this.projects.currentFolder.children) {
              if (item.name) {
                const itemName = item.name.toLowerCase();
                const itemNameWords = itemName.split(" ");

                for (const nameWord of itemNameWords) {
                  for (const searchWord of fileNameWords) {
                    const similarity = this.calculateSimilarity(
                      nameWord,
                      searchWord
                    );
                    if (similarity >= threshold) {
                      matches.push({ item, similarity });
                      break; // Found a match, move to the next item
                    }
                  }
                }
              }
            }

            if (matches.length > 0) {
              matches.sort((a, b) => b.similarity - a.similarity); // Sort by similarity
              console.log(
                `Found similar files in "${this.projects.currentFolder.name}":`,
                matches
              );
              var o = {
                id: Date.now(),
                name: `Search files in "${this.projects.currentFolder.name}"`,
                children: [],
                content: null,
              };
              this.projects.folderStack.push(this.projects.currentFolder);
              matches.forEach((match) => {
                o.children.push(match.item);
              });
              this.projects.currentFolder = o;
              this.projects.searchValue = "";
            } else {
              console.log(
                `No similar files found in "${this.projects.currentFolder.name}".`
              );
            }
          },

          calculateSimilarity(word1, word2) {
            const maxLength = Math.max(word1.length, word2.length);
            const editDistance = this.calculateLevenshteinDistance(
              word1,
              word2
            );
            return 1 - editDistance / maxLength;
          },
          calculateLevenshteinDistance(s1, s2) {
            const m = s1.length;
            const n = s2.length;
            const dp = new Array(m + 1)
              .fill(0)
              .map(() => new Array(n + 1).fill(0));

            for (let i = 0; i <= m; i++) {
              for (let j = 0; j <= n; j++) {
                if (i === 0) {
                  dp[i][j] = j;
                } else if (j === 0) {
                  dp[i][j] = i;
                } else if (s1[i - 1] === s2[j - 1]) {
                  dp[i][j] = dp[i - 1][j - 1];
                } else {
                  dp[i][j] =
                    1 + Math.min(dp[i - 1][j], dp[i][j - 1], dp[i - 1][j - 1]);
                }
              }
            }

            return dp[m][n];
          },
          copy(item) {
            this.projects.copyedElement = item;
          },
          justcopy(item) {
            var o = JSON.parse(JSON.stringify(item)); // Creates a deep copy
            o.id = Date.now();
            this.projects.copyedElement = o;
          },
          past(folder) {
            folder.children.push(this.projects.copyedElement);
          },
          pastInside() {
            this.projects.currentFolder.children.push(
              this.projects.copyedElement
            );
          },
          rename(name, file) {
            this.projects.selectedFile = file;
            this.projects.fileName = name;
            this.projects.addProjectOpen = true;
          },
          DeleteAll() {
            this.projects.currentFolder.children = [];
          },
          exportFolderAsJSON(folder) {
            const data = JSON.stringify(folder);
            const blob = new Blob([data], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = folder.name + ".json";
            a.click();
          },

          editElement(ele) {
            this.settings.openElementMenu = true;
            this.settings.openProjectMenu = false;
            this.element = ele;
            if (this.projects.currentFolder.isFile !== undefined) {
              this.render(this.projects.currentFolder.children);
            }
            // document.getElementById("main").innerHTML =this.template ;
            // this.template = this.render(this.element);
            // console.log("edit this element ", [ele], this.template);
          },
          processElement(element) {
            let elementString = `<${element.name} id="${element.id}"`;

            // Add attributes
            for (const attribute of element.attributes) {
              elementString += ` ${attribute.name}="${attribute.value}"`;
            }

            // Add classes
            if (element.classes.length > 0) {
              elementString += ` class="hoverable ${element.classes.join(
                " "
              )}"`;
            }
            // elementString += `x-on:click='divopen(${element.id})'>`;

            elementString += ">";

            // Add content
            if (element.content) {
              elementString += element.content;
            }

            // Process children
            for (const child of element.children) {
              if (child.isElement) {
                elementString += this.processElement(child);
              } else {
                elementString += child;
              }
            }

            elementString += `</${element.name}>`;

            return elementString;
          },
          render(elements) {
            let htmlString = "";
            for (const element of elements) {
              if (element.isElement) {
                htmlString += this.processElement(element);
              } else {
                htmlString += element;
              }
            }

            this.template = htmlString;
          },
          addClass(name) {
            if (name.value === "") return;
            this.element.classes.push(name.value);
            name.value = "";
          },
          removeClass(i) {
            this.element.classes.splice(i, 1);
          },
          addAttribute() {
            // console.log(name,value)
            this.element.attributes.push({
              name: this.attNameRef,
              value: this.attValueRef,
            });
            this.attNameRef = "";
            this.attValueRef = "";
          },
          removeAttribute(i) {
            this.element.attributes.splice(i, 1);
          },
          divopen(id) {
            if (!this.hasRun) {
              console.log("hello", id);

              this.hasRun = true; // Set the flag to true to indicate that the function has run
            } else {
              this.hasRun = false;
            }
            // file = JSON.parse(file);
            // this.projects.folderStack.push(this.projects.currentFolder);
            // this.projects.currentFolder = file;
            // this.editElement(file);
          },
        };
      });
    });
    const hoverableElements = document.querySelectorAll("#main .hoverable");
    // if ("serviceWorker" in navigator) {
    //   navigator.serviceWorker
    //     .register("/service-worker.js")
    //     .then((registration) => {
    //       console.log(
    //         "Service Worker registered with scope:",
    //         registration.scope
    //       );
    //     })
    //     .catch((error) => {
    //       console.error("Service Worker registration failed:", error);
    //     });
    // }
  </script>
</html>
